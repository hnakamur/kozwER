<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ja" lang="ja">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<title>Data Flow Diagram Sample</title>
<script type="text/javascript" src="lib/raphael.js"></script>
<script type="text/javascript" src="raphael.kozwER.js"></script>
<link rel="stylesheet" type="text/css" href="kozw.css">
<script>
window.onload = function() {
  var paper = Raphael("canvas", 640, 400);

  var taskUnitDefaults = paper.kozwER.defaults("taskUnit");
  var unitRx = taskUnitDefaults.rx;
  var unitRy = taskUnitDefaults.ry;

  var trigRx = 30;
  var trigRy = 21;
  var taskTriggerDefaults = {rx: trigRx, ry: trigRy};

  var elems = [];
  elems.push(paper.kozwER.defaults({taskTrigger: taskTriggerDefaults}));

  var x = 100;
  var y = 145;
  elems.push(paper.kozwER.taskUnit(x, y, "収支取引\nの登録"));
  elems.push(paper.kozwER.taskTrigger(x - unitRx, y - unitRy, "週次"));

  elems.push(paper.kozwER.notebook(260, 70, "取引\n集計簿"));

  elems.push(paper.kozwER.notebook(260, 220, "収支\n取引簿"));

  x = 450;
  y = 145;
  elems.push(paper.kozwER.taskUnit(x, y, "費目別予算\nの登録"));
  elems.push(paper.kozwER.taskTrigger(x - unitRx, y - unitRy, "随時"));

  elems.push(paper.kozwER.curve(
    [100, 145 - (unitRy + 10), 120, 70, 260 - unitRx, 70],
    {arrow: {end: true}}
  ));
  elems.push(paper.text(150, 60, "費目別実績"));

  elems.push(paper.kozwER.curve(
    [100, 145 + (unitRy + 10), 120, 220, 260 - unitRx, 220],
    {arrow: {end: true}}
  ));
  elems.push(paper.text(150, 230, "収支取引"));

//  elems.push(paper.kozwER.curve(
//    [450, 145 - (unitRy + 10), 430, 70, 260 + unitRx, 70],
//    {arrow: {end: true}}
//  ));
  elems.push(paper.text(380, 60, "費目別予算"));
  elems.push(paper.kozwER.curve(
    [260 + unitRx, 70, 430, 70, 450, 145 - (unitRy + 10)],
    {arrow: {start: true}}
  ));

  var elemSet = paper.set(elems).translate(100, 0);

// paper.attr({"class": "hoge", "font-family": "Helvetica", "font-size": 14});
/*
  paper.kozw.dfdDiagram({
    tasks: [
      {
        id: "receive_order_task",
        name: "受注受付",
        job_role: "受注担当者",
        occurrence_condition: "注文を受けた!"
      }
    ],
    storages: [
      {
        id: "order_ledger",
        name: "受注簿"
      }
    ],
    flows: [
      {
        source_id: "receive_order_task",
        destination_id: "order_ledger",
        bidirectional: true
      }
    ]
  });
*/
};
</script>
</head>
<body>
  <h1>Data Flow Diagram Sample</h1>
  <div id="canvas"></div>
</body>
</html>

