<svg xmlns="http://www.w3.org/2000/svg" 
     xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1"
     onload="loaded()" id="svg2">
  <!--script type="text/javascript" xlink:href="svgdom.js"/-->

  <script type="text/javascript"><![CDATA[
    
    function loaded() {
      var onloadFunc = doload;
      if (top.svgweb) {
        top.svgweb.addOnLoad(onloadFunc, true, window);
      } else {
        onloadFunc();
      }
    }   
     
    function doload() {
var svgdom = (function() {
  var svgns = "http://www.w3.org/2000/svg",
      xlinkns = "http://www.w3.org/1999/xlink";

  function createFragment() {
    return document.createDocumentFragment(true);
  }

  function createElement(type) {
    return document.createElementNS(svgns, type);
  }

  function createText(text) {
    var elem = createElement('text');
    elem.appendChild(document.createTextNode(text));
    return elem;
  }

  function setAttr(elem, attributes) {
    for (var k in attributes)
      elem.setAttribute(k, attributes[k]);
    return elem;
  }

  function attr(elem, names) {
    var ret = {};
    for (var i = 0, len = names.length; i < len; i++) {
      var name = names[i];
      ret[name] = elem.getAttribute(name);
    }
    return ret;
  }

  return {
    createFragment: createFragment,
    createElement: createElement,
    createText: createText,
    setAttr: setAttr,
    attr: attr
  };
})();

      var svg2 = document.getElementById('svg2');
      svgdom.setAttr(svg2, {width: 640, height: 480});

      var frag = svgdom.createFragment();
      for (var i = 0; i < 10; i++) {
        var circle = svgdom.createElement('circle');
        svgdom.setAttr(circle, {
          cx: i * 20 + 10,
          cy: 100,
          r: 10,
          fill: "none",
          stroke: "#000"
        });
        frag.appendChild(circle);
      }

      var text = svgdom.createText("こんにちは, SVG Web");
      svgdom.setAttr(text, {x: 20, y: 40});
      frag.appendChild(text);

      var path = svgdom.createElement("path");
      path.id = "path1";
      svgdom.setAttr(path, {d: "M 100 200 C 200 100 300 0 400 100 C 500 200 600 300 700 200 C 800 100 900 100 900 100", fill: "none", stroke: "black"});
      frag.appendChild(path);

      var text2 = svgdom.createElement("text");
      var textpath = svgdom.createElement("textPath");
      textpath.setAttributeNS(svgdom.xlinkns, "href", "#path1");
      textpath.appendChild(document.createTextNode("やあ textpath"));
      text2.appendChild(textpath);

      frag.appendChild(text2);

      svg2.appendChild(frag);
    }
  ]]>
  </script>
  <defs>
  </defs>
    <path id="path1" d="M 100 200 C 200 100 300 0 400 100 C 500 200 600 300 700 200 C 800 100 900 100 900 100" fill="none" stroke="red"/>
  <text>
    <textPath xlink:href="#path1">Text along path1</textPath>
  </text>
</svg>

